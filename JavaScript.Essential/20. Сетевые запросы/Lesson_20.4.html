<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson_20.4</title>
    <style>
        table {
            padding: 1px;
            border: 1px solid black;
        }
        table tr td {
            padding: 4px;
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <table>
        <tr>
            <td>UserId</td>
            <td>ID</td>
            <td>Title</td>
            <td>Completed</td>
        </tr>
    </table>
    

    <template id="template">
        <tr>
            <td>{{userId}}</td>
            <td>{{id}}</td>
            <td>{{title}}</td>
            <td>{{completed}}</td>
        </tr>
    </template>

    <script src="mustache.min.js"></script>
    <script>
        /*
        Задание:
        Напишите сценарий, который выполняет GET запрос по адресу https://jsonplaceholder.typicode.com/todos
        И выводит содержимое ответа в виде таблицы.
        */
         
        let url = "https://jsonplaceholder.typicode.com/todos"; 
        let promise = fetch(url); 

        promise 
            .then(response => response.json())
            .then(response => showData(response))
        
        function showData(array) {
            let template = document.querySelector("#template").innerHTML;
            let table = document.querySelector("table"); 
            for (const item of array) {
                let html = Mustache.render(template, item);
                table.insertAdjacentHTML("beforeend", html); 
            }
        }
    </script>
</body>

</html>